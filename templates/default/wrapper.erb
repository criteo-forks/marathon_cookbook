#!/bin/bash
# This file is generated by Chef

<%- if @syslog -%>
# stdout and stderr to syslog
exec 1> >(exec logger -p user.info -t "marathon")
exec 2> >(exec logger -p user.err  -t "marathon")
<%- end -%>

<%- if @version >= '1.5' -%>
<%= @launcher %> \
<%- @jvm.sort.each do |option, value| -%>
<%- if value -%>
  <%= "#{option !~ /^D/ ? '-J' : ''}-#{option}" %><%= "=#{value}" if value.is_a? String %> \
<%- end -%>
<%- end -%>
<%- else -%>
# marathon jar configuration
exec java \
<%- @jvm.sort.each do |option, value| -%>
<%- if value -%>
  <%= "-#{option}" %><%= "=#{value}" if value.is_a? String %> \
<%- end -%>
<%- end -%>
-jar <%= @jar %> \
<%- end -%>
<%- @flags.sort.each do |flag, value| -%>
<%- if value.is_a? String -%>
  <%= "--#{flag}" %><%= " \"#{value}\"" %> \
<%- else -%>
  <%= "--#{value ? '' : 'disable_'}#{flag}" %> \
<%- end -%> 
<%- end -%>
